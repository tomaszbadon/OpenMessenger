<!DOCTYPE HTML>
<html>
<head>
    <title>Getting Started: Serving Web Content</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

    <script src="/webjars/jquery/3.1.1/jquery.min.js"></script>
    <script src="/webjars/sockjs-client/1.0.2/sockjs.min.js"></script>
    <script src="/webjars/stomp-websocket/2.3.3/stomp.min.js"></script>

</head>
<body>

<script
        async
        src="https://ga.jspm.io/npm:es-module-shims@1.5.1/dist/es-module-shims.js"
        crossorigin="anonymous">
</script>

<script type="module">
    var ws = new WebSocket('ws://127.0.0.1:15674/ws');
    var client = Stomp.over(ws);
    client.reconnect_delay = 5000;

    var userName = 'dominica.rosatti';

    client.connect(userName, 'my_password', function(frame) {
        console.log('Connected: ' + frame);
        client.subscribe('/amq/queue/user-queue-' + userName, function(messageOutput) {
            console.log(messageOutput.body);
        });
    });

    client.debug = function(str) {
         console.log(str);
    };

</script>

<p>Get your greeting <a href="/greeting">here</a></p>
</body>
</html>